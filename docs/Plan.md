# План автоматизации

## Перечень автоматизируемых сценариев 

Корректными данными при заполнении полей ввода следует считать:
1. Номер карты: цифровые символы, 16 шт.,  в формате **** **** **** ****
1. Месяц: 01-12, но не ранее текущего месяца в случае, если указан текущий год 
1. Год: последние две цифры порядкового номера года, не ранее текущего года, не более 5ти лет от текущего года
1. Владелец: буквенные символы латинского алфавита
1. CVC: цифровые символы, 3 шт. 

Карты, представленные для тестирования (файл data.json):
* 4444 4444 4444 4441, status APPROVED
* 4444 4444 4444 4442, status DECLINED

Тестируемые Базы данных:
* MySql
* PostgreSQL 

### Тестовые сценарии

#### Позитивные сценарии
1. Оплата по карте со статусом APPROVED  
Номер карты 4444 4444 4444 4441, остальные поля заполнены корректными значениями  
Ожидаемый результат: появилось всплывающее окно "Операция одобрена Банком", в БД в payment_entity появилась запись со статусом APPROVED 

1. Кредит по данным карты со статусом APPROVED   
Номер карты 4444 4444 4444 4441, остальные поля заполнены корректными значениями  
Ожидаемый результат: появилось всплывающее окно "Операция одобрена Банком", в БД в credit_request_entity появилась запись со статусом APPROVED 

1. Оплата по карте со статусом DECLINED    
Номер карты 4444 4444 4444 4442, остальные поля заполнены корректными значениями   
Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity появилась запись со статусом DECLINED 

1. Кредит по данным карты со статусом DECLINED  
Номер карты 4444 4444 4444 4442, остальные поля заполнены корректными значениями  
Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity появилась запись со статусом DECLINED

#### Негативные сценарии
1. Оплата по несуществующей карте   
Номер карты 4444 4444 4444 4443, остальные поля заполнены корректными значениями  
Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity новая запись не появилась 

1. Кредит по данным несуществующей карты   
Номер карты 4444 4444 4444 4443, остальные поля заполнены корректными значениями  
Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity новая запись не появилась

1. Оплата по карте, указан невалидный номер   
Номер карты 4444 4444 4444 444, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Номер карты появилось сообщение об ошибке "Неверный формат", в БД в payment_entity новая запись не появилась 

1. Кредит по данным карты, указан невалидный номер    
Номер карты 4444 4444 4444 444, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Номер карты появилось сообщение об ошибке "Неверный формат", в БД в credit_request_entity новая запись не появилась

1. Оплата по карте с истекшим сроком действия (месяц)  
Номер карты 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась 

1. Кредит по данным карты с истекшим сроком действия (месяц)  
Номер карты 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась

1. Оплата по данным карты, указан невалидный месяц   
Номер карты 4444 4444 4444 4441, в поле Месяц указать 00, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась 

1. Кредит по данным карты, указан невалидный месяц   
Номер карты 4444 4444 4444 4441, в поле Месяц указать 00, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась

1. Оплата по карте с истекшим сроком действия (год)  
Номер карты 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Год появилось сообщение об ошибке "Истёк срок действия карты", в БД в payment_entity новая запись не появилась 

1. Кредит по данным карты с истекшим сроком действия (год)  
Номер карты 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Год появилось сообщение об ошибке "Истёк срок действия карты", в БД в credit_request_entity новая запись не появилась

1. Оплата по данным карты, указан невалидный год   
Номер карты 4444 4444 4444 4441, в поле Год указать "последние две цифры текущего года + 6", остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Год появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась 

1. Кредит по данным карты, указан невалидный год   
Номер карты 4444 4444 4444 4441, в поле Год указать "последние две цифры текущего года + 6", остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Год появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась

1. Оплата по данным карты, указано некорректное значение в поле Владелец  
Номер карты 4444 4444 4444 4441, в поле Владелец указать некорректные данные, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Владелец появилось сообщение об ошибке, в БД в payment_entity новая запись не появилась 

1. Кредит по данным карты, указано некорректное значение в поле Владелец   
Номер карты 4444 4444 4444 4441, в поле Владелец указать некорректные данные, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем Владелец появилось сообщение об ошибке, в БД в credit_request_entity новая запись не появилась

1. Оплата по данным карты, указано некорректное значение в поле CVC/CVV   
Номер карты 4444 4444 4444 4441, в поле CVC/CVV указать 0, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем CVC/CVV появилось сообщение об ошибке "Неверный формат", в БД в payment_entity новая запись не появилась 

1. Кредит по данным карты, указано некорректное значение в поле CVC/CVV   
Номер карты 4444 4444 4444 4441, в поле CVC/CVV указать 0, остальные поля заполнены корректными значениями  
Ожидаемый результат: под полем CVC/CVV появилось сообщение об ошибке "Неверный формат", в БД в credit_request_entity новая запись не появилась

## Перечень используемых инструментов с обоснованием выбора
* Java 8 - язык написания авто-тестов, наиболее надежная версия
* Gradle - система автоматизации сборки и управления зависимостями
* JUnit — платформа для написания авто-тестов и их запуска 
* Selenide - фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver, более удобный и простой в использовании, чем Selenium
* Docker Compose - инструмент, позволяющий запускать мультиконтейнерные приложения, чтобы не устанавливать на компьютер необходимые для работы приложения Node.js и СУБД 
* Allure - фреймворк, предназначенный для создания отчетов, более наглядных, чем у Gradle

## Перечень и описание возможных рисков при автоматизации
* Из-за отсутствия ТЗ и какой-либо документации сложно понять, как должно работать приложение и какое поведение системы нужно считать ошибкой
* Реальная система и реальные данные скорее всего будут отличаться от SUT и тестовых данных, и автоматизация тестирования может оказаться бесполезной
* Использование сторонних библиотек и фреймворков может увеличивать риск возникновения технических проблем
* Возможны проблемы из-за необходимости поддержки двух СУБД (MySQL, Postgres)
* Отсутствие test_id усложняет написание и поддержку тестов

## Интервальная оценка с учетом рисков (в часах)
Настройка тестового окружения - 8  
Написание и отладка автотестов - 40  
Прогон тестов и заведение issue - 8  
Устранение замечаний - 16  
Подготовка отчета по итогам автоматизированного тестирования - 8  
Подготовка отчета по итогам автоматизации - 8  
**Итого с учетом рисков: 110 часов**

## План сдачи работ
Автоматизация - 04.05.2020  
Подготовка отчетных документов - 08.05.2020  